(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{825:function(e,r,t){Promise.resolve().then(t.bind(t,6655))},6655:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ea}});var a=t(7437),n=t(2265),s=t(495),i=t(3102),l=t(6013),d=t(7135),c=t(8149),o=t(1584),u=t(8324),f=t(5171),x=t(4605),m=t(1715),g=t(7513),h=t(1336),p=t(1383),y="Radio",[v,b]=(0,u.b)(y),[j,N]=v(y),w=n.forwardRef((e,r)=>{let{__scopeRadio:t,name:s,checked:i=!1,required:l,disabled:d,value:u="on",onCheck:x,...m}=e,[g,h]=n.useState(null),p=(0,o.e)(r,e=>h(e)),y=n.useRef(!1),v=!g||!!g.closest("form");return(0,a.jsxs)(j,{scope:t,checked:i,disabled:d,children:[(0,a.jsx)(f.WV.button,{type:"button",role:"radio","aria-checked":i,"data-state":S(i),"data-disabled":d?"":void 0,disabled:d,value:u,...m,ref:p,onClick:(0,c.M)(e.onClick,e=>{i||null==x||x(),v&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),v&&(0,a.jsx)(R,{control:g,bubbles:!y.current,name:s,value:u,checked:i,required:l,disabled:d,style:{transform:"translateX(-100%)"}})]})});w.displayName=y;var k="RadioIndicator",C=n.forwardRef((e,r)=>{let{__scopeRadio:t,forceMount:n,...s}=e,i=N(k,t);return(0,a.jsx)(p.z,{present:n||i.checked,children:(0,a.jsx)(f.WV.span,{"data-state":S(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:r})})});C.displayName=k;var R=e=>{let{control:r,checked:t,bubbles:s=!0,...i}=e,l=n.useRef(null),d=function(e){let r=n.useRef({value:e,previous:e});return n.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}(t),c=function(e){let[r,t]=n.useState(void 0);return(0,h.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,n;if(!Array.isArray(r)||!r.length)return;let s=r[0];if("borderBoxSize"in s){let e=s.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,n=r.blockSize}else a=e.offsetWidth,n=e.offsetHeight;t({width:a,height:n})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}(r);return n.useEffect(()=>{let e=l.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==t&&r){let a=new Event("click",{bubbles:s});r.call(e,t),e.dispatchEvent(a)}},[d,t,s]),(0,a.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function S(e){return e?"checked":"unchecked"}var D=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[z,E]=(0,u.b)(I,[x.Pc,b]),M=(0,x.Pc)(),_=b(),[O,Z]=z(I),T=n.forwardRef((e,r)=>{let{__scopeRadioGroup:t,name:n,defaultValue:s,value:i,required:l=!1,disabled:d=!1,orientation:c,dir:o,loop:u=!0,onValueChange:h,...p}=e,y=M(t),v=(0,g.gm)(o),[b,j]=(0,m.T)({prop:i,defaultProp:s,onChange:h});return(0,a.jsx)(O,{scope:t,name:n,required:l,disabled:d,value:b,onValueChange:j,children:(0,a.jsx)(x.fC,{asChild:!0,...y,orientation:c,dir:v,loop:u,children:(0,a.jsx)(f.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":d?"":void 0,dir:v,...p,ref:r})})})});T.displayName=I;var A="RadioGroupItem",L=n.forwardRef((e,r)=>{let{__scopeRadioGroup:t,disabled:s,...i}=e,l=Z(A,t),d=l.disabled||s,u=M(t),f=_(t),m=n.useRef(null),g=(0,o.e)(r,m),h=l.value===i.value,p=n.useRef(!1);return n.useEffect(()=>{let e=e=>{D.includes(e.key)&&(p.current=!0)},r=()=>p.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]),(0,a.jsx)(x.ck,{asChild:!0,...u,focusable:!d,active:h,children:(0,a.jsx)(w,{disabled:d,required:l.required,checked:h,...f,...i,name:l.name,ref:g,onCheck:()=>l.onValueChange(i.value),onKeyDown:(0,c.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,c.M)(i.onFocus,()=>{var e;p.current&&(null===(e=m.current)||void 0===e||e.click())})})})});L.displayName=A;var F=n.forwardRef((e,r)=>{let{__scopeRadioGroup:t,...n}=e,s=_(t);return(0,a.jsx)(C,{...s,...n,ref:r})});F.displayName="RadioGroupIndicator";var q=t(8030);let P=(0,q.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var V=t(7440);let Y=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)(T,{className:(0,V.cn)("grid gap-2",t),...n,ref:r})});Y.displayName=T.displayName;let W=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)(L,{ref:r,className:(0,V.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:(0,a.jsx)(F,{className:"flex items-center justify-center",children:(0,a.jsx)(P,{className:"h-2.5 w-2.5 fill-current text-current"})})})});W.displayName=L.displayName;let H=(0,q.Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var U=t(4817);let B=(0,t(2218).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function G(e){let{className:r,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,V.cn)(B({variant:t}),r),...n})}let $=(0,q.Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);t(966);var K=t(7691),X=t.n(K),J=t(1580);let Q={0:"Manufactured",1:"In Transit",2:"Shipped",3:"Sold"};function ee(e){let{id:r,refreshData:t}=e,{PharmaContract:s,accounts:i}=(0,J.$)(),[d,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{delete X().Icon.Default.prototype._getIconUrl,X().Icon.Default.mergeOptions({iconRetinaUrl:"/marker-icon-2x.png",iconUrl:"/marker-icon.png",shadowUrl:"/marker-shadow.png"})},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=(await s.getMedicineHistory(r)).map((e,r)=>({id:r+1,location:e.locationName,date:new Date(1e3*Number(e.date)).toISOString().split("T")[0],status:Q[e.status],coordinates:[Number(e.latitude),Number(e.longitude)]}));c(e),console.log(e)}catch(e){console.error("Error fetching tracking data:",e)}})()},[t]),(0,a.jsxs)(l.Zb,{className:"w-full max-w-6xl mx-auto",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Track Your Item"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1 space-y-6",children:d.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center z-10",children:(0,a.jsx)($,{className:"h-4 w-4 text-primary-foreground"})}),(0,a.jsxs)("div",{className:"flex-grow ml-4 font-medium",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.date}),(0,a.jsx)("p",{className:"text-base",children:e.location}),(0,a.jsx)(G,{variant:0===r?"default":"secondary",className:"mt-1",children:e.status})]})]},e.id))}),(0,a.jsx)("div",{className:"lg:col-span-2 h-[600px] rounded-lg overflow-hidden"})]})})]})}function er(){let{PharmaContract:e,accounts:r}=(0,J.$)(),[t,c]=(0,n.useState)(""),[o,u]=(0,n.useState)(null),[f,x]=(0,n.useState)(!1),[m,g]=(0,n.useState)(0),[h,p]=(0,n.useState)({location:"",latitude:"",longitude:"",status:"intransit"}),y=async r=>{r.preventDefault(),x(!0);try{let r=await e.Medicines(t),a=(await e.Organizations(r.OrganizationId)).name,n=Number(r.expiryDate),s=Number(r.manufacturingDate),i=new Date(1e3*n),l=new Date(1e3*s),d=e=>{let r=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return"".concat(r,"-").concat(t,"-").concat(a)},c=d(i),o=d(l),f=Number(r.id),x={name:r.name,id:f,organizationName:a,manufacturingDate:o,expiryDate:c};u(x),g(m+1)}catch(e){console.error("Error creating Organization:",e)}finally{x(!1)}},v=async r=>{r.preventDefault(),x(!0);try{let r;if(null==o){alert("Load a medicine first");return}if("intransit"===h.status)r=await e.addInTransitCheckpoint(t,h.location,h.latitude,h.longitude);else if("shipped"===h.status)r=await e.addShippedCheckpoint(t,h.location,h.latitude,h.longitude);else if("sold"===h.status)r=await e.addSoldCheckpoint(t,h.location,h.latitude,h.longitude);else throw Error("Invalid status given");await r.wait()}catch(e){console.error("Error adding Checkpoint: ",e)}finally{g(m+1)}console.log("New Checkpoint:",h),x(!1),p({location:"",latitude:"",longitude:"",status:"intransit"})};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Enter Medicine ID"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("form",{onSubmit:y,className:"flex gap-4",children:[(0,a.jsx)(i.I,{type:"text",placeholder:"Enter medicine ID",value:t,onChange:e=>c(e.target.value),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"}),(0,a.jsxs)(s.z,{type:"submit",className:"bg-gray-600 hover:bg-gray-700 text-gray-100",disabled:f,children:[f?(0,a.jsx)(H,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Track"]})]})})]}),o&&(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Medicine Details"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-400",children:"Medicine Name"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-400",children:"Medicine ID"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-400",children:"Organization Name"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.organizationName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-400",children:"Manufacturing Date"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.manufacturingDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-400",children:"Expiry Date"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.expiryDate})]})]})})]}),(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Add New Checkpoint"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"location",className:"text-gray-100",children:"Location Name"}),(0,a.jsx)(i.I,{id:"location",value:h.location,onChange:e=>p({...h,location:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"latitude",className:"text-gray-100",children:"Latitude"}),(0,a.jsx)(i.I,{id:"latitude",value:h.latitude,onChange:e=>p({...h,latitude:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"longitude",className:"text-gray-100",children:"Longitude"}),(0,a.jsx)(i.I,{id:"longitude",value:h.longitude,onChange:e=>p({...h,longitude:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-gray-100",children:"Status"}),(0,a.jsxs)(Y,{value:h.status,onValueChange:e=>p({...h,status:e}),className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(W,{value:"intransit",id:"intransit"}),(0,a.jsx)(d._,{htmlFor:"intransit",className:"text-gray-100",children:"In Transit"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(W,{value:"shipped",id:"shipped"}),(0,a.jsx)(d._,{htmlFor:"shipped",className:"text-gray-100",children:"Shipped"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(W,{value:"sold",id:"sold"}),(0,a.jsx)(d._,{htmlFor:"sold",className:"text-gray-100",children:"Sold"})]})]})]}),(0,a.jsxs)(s.z,{type:"submit",className:"bg-gray-600 hover:bg-gray-700 text-gray-100",disabled:f,children:[f?(0,a.jsx)(H,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Add Checkpoint"]})]})})]}),o&&(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Track Location"})}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(ee,{id:Number(t),refreshData:m})})]})]})})}var et=t(7942);function ea(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.Z,{title:"Track Medicine"}),(0,a.jsx)(er,{})]})}},7942:function(e,r,t){"use strict";var a=t(7437);t(2265),r.Z=e=>{let{title:r}=e;return(0,a.jsx)("header",{className:"top-0 left-0 right-0 z-10 py-4 bg-gray-800 py-4",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:r}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{className:"flex space-x-6",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"text-white hover:text-cyan-400 transition-colors",children:"About"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/manage-organization",className:"text-white hover:text-cyan-400 transition-colors",children:"Manage Organization"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/track-medicine",className:"text-white hover:text-cyan-400 transition-colors",children:"Track a Medicine"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/#team",className:"text-white hover:text-cyan-400 transition-colors",children:"Our Team"})})]})})]})})}},495:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var a=t(7437),n=t(2265),s=t(1538),i=t(2218),l=t(7440);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:i,asChild:c=!1,...o}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:n,size:i,className:t})),ref:r,...o})});c.displayName="Button"},6013:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var a=t(7437),n=t(2265),s=t(7440);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},3102:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var a=t(7437),n=t(2265),s=t(7440);let i=n.forwardRef((e,r)=>{let{className:t,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},7135:function(e,r,t){"use strict";t.d(r,{_:function(){return c}});var a=t(7437),n=t(2265),s=t(8364),i=t(2218),l=t(7440);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)(s.f,{ref:r,className:(0,l.cn)(d(),t),...n})});c.displayName=s.f.displayName},7440:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var a=t(4839),n=t(6164);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}},4817:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(8030).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},966:function(){}},function(e){e.O(0,[733,212,60,950,127,346,971,23,744],function(){return e(e.s=825)}),_N_E=e.O()}]);