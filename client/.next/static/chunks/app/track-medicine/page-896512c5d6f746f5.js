(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{825:function(e,r,t){Promise.resolve().then(t.bind(t,426))},426:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return z}});var a=t(7437),s=t(2265),n=t(495),i=t(3102),l=t(6013),c=t(7135),d=t(5216),o=t(8165),u=t(7440);let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.fC,{className:(0,u.cn)("grid gap-2",t),...s,ref:r})});x.displayName=d.fC.displayName;let g=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(d.ck,{ref:r,className:(0,u.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(d.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});g.displayName=d.ck.displayName;var m=t(9627),f=t(4817);let h=(0,t(2218).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,u.cn)(h({variant:t}),r),...s})}var y=t(9321),j=t(8977),b=t(707),N=t(5393),v=t(6429),w=t(3799);t(966);var k=t(1580);let C={0:"Manufactured",1:"In Transit",2:"Shipped",3:"Sold"};function S(e){let{id:r,refreshData:t}=e,{PharmaContract:n,accounts:i}=(0,k.$)(),[c,d]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(async()=>{try{let e=(await n.getMedicineHistory(r)).map((e,r)=>({id:r+1,location:e.locationName,date:new Date(1e3*Number(e.date)).toISOString().split("T")[0],status:C[e.status],coordinates:[Number(e.latitude),Number(e.longitude)]}));d(e),console.log(e)}catch(e){console.error("Error fetching tracking data:",e)}})()},[t]),(0,a.jsxs)(l.Zb,{className:"w-full max-w-6xl mx-auto",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Track Your Item"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1 space-y-6",children:c.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center z-10",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-primary-foreground"})}),(0,a.jsxs)("div",{className:"flex-grow ml-4 font-medium",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.date}),(0,a.jsx)("p",{className:"text-base",children:e.location}),(0,a.jsx)(p,{variant:0===r?"default":"secondary",className:"mt-1",children:e.status})]})]},e.id))}),(0,a.jsx)("div",{className:"lg:col-span-2 h-[600px] rounded-lg overflow-hidden",children:c&&c.length>0&&null!=c[0].coordinates&&(0,a.jsxs)(j.h,{center:c[0].coordinates,zoom:4,style:{height:"100%",width:"100%"},children:[(0,a.jsx)(b.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),c.map(e=>(0,a.jsx)(N.J,{position:e.coordinates,children:(0,a.jsxs)(v.G,{children:[e.location,(0,a.jsx)("br",{}),e.date]})},e.id)),(0,a.jsx)(w.a,{positions:c.map(e=>e.coordinates),color:"blue"})]})})]})})]})}function D(){let{PharmaContract:e,accounts:r}=(0,k.$)(),[t,d]=(0,s.useState)(""),[o,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[y,j]=(0,s.useState)(0),[b,N]=(0,s.useState)({location:"",latitude:"",longitude:"",status:"intransit"}),v=async r=>{r.preventDefault(),p(!0);try{let r=await e.Medicines(t),a=(await e.Organizations(r.OrganizationId)).name,s=Number(r.expiryDate),n=Number(r.manufacturingDate),i=new Date(1e3*s),l=new Date(1e3*n),c=e=>{let r=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return"".concat(r,"-").concat(t,"-").concat(a)},d=c(i),o=c(l),x=Number(r.id),g={name:r.name,id:x,organizationName:a,manufacturingDate:o,expiryDate:d};u(g),j(y+1)}catch(e){console.error("Error creating Organization:",e)}finally{p(!1)}},w=async r=>{r.preventDefault(),p(!0);try{let r;if(null==o){alert("Load a medicine first");return}if("intransit"===b.status)r=await e.addInTransitCheckpoint(t,b.location,b.latitude,b.longitude);else if("shipped"===b.status)r=await e.addShippedCheckpoint(t,b.location,b.latitude,b.longitude);else if("sold"===b.status)r=await e.addSoldCheckpoint(t,b.location,b.latitude,b.longitude);else throw Error("Invalid status given");await r.wait()}catch(e){console.error("Error adding Checkpoint: ",e)}finally{j(y+1)}console.log("New Checkpoint:",b),p(!1),N({location:"",latitude:"",longitude:"",status:"intransit"})};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Enter Medicine ID"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("form",{onSubmit:v,className:"flex gap-4",children:[(0,a.jsx)(i.I,{type:"text",placeholder:"Enter medicine ID",value:t,onChange:e=>d(e.target.value),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"}),(0,a.jsxs)(n.z,{type:"submit",className:"bg-gray-600 hover:bg-gray-700 text-gray-100",disabled:h,children:[h?(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Track"]})]})})]}),o&&(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Medicine Details"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-400",children:"Medicine Name"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-400",children:"Medicine ID"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-400",children:"Organization Name"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.organizationName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-400",children:"Manufacturing Date"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.manufacturingDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-400",children:"Expiry Date"}),(0,a.jsx)("p",{className:"text-gray-100",children:o.expiryDate})]})]})})]}),(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Add New Checkpoint"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"location",className:"text-gray-100",children:"Location Name"}),(0,a.jsx)(i.I,{id:"location",value:b.location,onChange:e=>N({...b,location:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"latitude",className:"text-gray-100",children:"Latitude"}),(0,a.jsx)(i.I,{id:"latitude",value:b.latitude,onChange:e=>N({...b,latitude:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"longitude",className:"text-gray-100",children:"Longitude"}),(0,a.jsx)(i.I,{id:"longitude",value:b.longitude,onChange:e=>N({...b,longitude:e.target.value}),className:"bg-gray-700 text-gray-100 border-gray-600 focus:border-gray-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-gray-100",children:"Status"}),(0,a.jsxs)(x,{value:b.status,onValueChange:e=>N({...b,status:e}),className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g,{value:"intransit",id:"intransit"}),(0,a.jsx)(c._,{htmlFor:"intransit",className:"text-gray-100",children:"In Transit"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g,{value:"shipped",id:"shipped"}),(0,a.jsx)(c._,{htmlFor:"shipped",className:"text-gray-100",children:"Shipped"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g,{value:"sold",id:"sold"}),(0,a.jsx)(c._,{htmlFor:"sold",className:"text-gray-100",children:"Sold"})]})]})]}),(0,a.jsxs)(n.z,{type:"submit",className:"bg-gray-600 hover:bg-gray-700 text-gray-100",disabled:h,children:[h?(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Add Checkpoint"]})]})})]}),o&&(0,a.jsxs)(l.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-gray-100",children:"Track Location"})}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(S,{id:Number(t),refreshData:y})})]})]})})}var _=t(7942);function z(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{title:"Track Medicine"}),(0,a.jsx)(D,{})]})}},7942:function(e,r,t){"use strict";var a=t(7437);t(2265),r.Z=e=>{let{title:r}=e;return(0,a.jsx)("header",{className:"top-0 left-0 right-0 z-10 py-4 bg-gray-800 py-4",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:r}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{className:"flex space-x-6",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:"text-white hover:text-cyan-400 transition-colors",children:"About"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/manage-organization",className:"text-white hover:text-cyan-400 transition-colors",children:"Manage Organization"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/track-medicine",className:"text-white hover:text-cyan-400 transition-colors",children:"Track a Medicine"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/#team",className:"text-white hover:text-cyan-400 transition-colors",children:"Our Team"})})]})})]})})}},495:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var a=t(7437),s=t(2265),n=t(1538),i=t(2218),l=t(7440);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:s,size:i,className:t})),ref:r,...o})});d.displayName="Button"},6013:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=t(7437),s=t(2265),n=t(7440);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},3102:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var a=t(7437),s=t(2265),n=t(7440);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},7135:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var a=t(7437),s=t(2265),n=t(8364),i=t(2218),l=t(7440);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n.f,{ref:r,className:(0,l.cn)(c(),t),...s})});d.displayName=n.f.displayName},7440:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var a=t(4839),s=t(6164);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}}},function(e){e.O(0,[733,212,60,950,127,144,346,971,23,744],function(){return e(e.s=825)}),_N_E=e.O()}]);